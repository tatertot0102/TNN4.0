import { c as createComponent, r as renderTemplate, d as defineScriptVars, a as addAttribute, b as renderHead } from '../../chunks/astro/server_OmCqSEb_.mjs';
import 'piccolore';
import 'html-escaper';
import 'clsx';
export { renderers } from '../../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(cooked.slice()) }));
var _a;
const $$Dashboard = createComponent(async ($$result, $$props, $$slots) => {
  const supabaseUrl = "https://wixtoqubaovdigzolmfw.supabase.co";
  const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndpeHRvcXViYW92ZGlnem9sbWZ3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkyMjA1MjIsImV4cCI6MjA4NDc5NjUyMn0.j5wL_IuAwUSYQf8HCdAol5yutFMEdDYZ06nZa2h3-00";
  const base = "/TNN4.0/";
  return renderTemplate(_a || (_a = __template(['<html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>TNN Admin Dashboard</title><link rel="stylesheet"', '><link rel="stylesheet"', ">", `</head> <body> <nav class="nav"> <h1>TNN Admin Dashboard</h1> <button id="logout" class="btn danger">Logout</button> </nav> <div class="wrap"> <div class="top"> <div> <h2>Video Catalog</h2> <p style="color: var(--muted); margin: 4px 0 0 0; font-size: 14px;"> <span id="total-count" class="count-badge">0</span> total videos
</p> </div> <button id="add" class="btn primary">+ Add Video</button> </div> <div class="filters"> <input id="search" class="input" placeholder="üîç Search by title or link..."> <select id="filter-section" class="select"> <option value="">All sections</option> <option value="hardnews">Hard News</option> <option value="features">Features</option> <option value="breaking">Breaking</option> <option value="docs">Docs</option> <option value="opinion">Opinion</option> <option value="heartwarming">Heartwarming</option> <option value="promo">Promo</option> <option value="catalog">Catalog</option> </select> <select id="filter-placement" class="select"> <option value="">All placements</option> <option value="hero">Hero</option> <option value="todays-mix">Today's Mix</option> <option value="section-featured">Section Featured</option> <option value="section-item">Section Item</option> </select> <select id="filter-status" class="select"> <option value="">All statuses</option> <option value="published">Published</option> <option value="draft">Draft</option> </select> </div> <div class="card"> <div id="table-container"></div> </div> </div> <!-- Modal --> <div id="modal" class="modal"> <div class="modal-box"> <div class="modal-head"> <h3 id="modal-title">Add Video</h3> <button id="close" class="btn">‚úï</button> </div> <form id="form"> <input type="hidden" id="id"> <div class="grid"> <div class="field"> <label>Section *</label> <select id="section" class="select" required> <option value="">Select section...</option> <option value="hardnews">Hard News</option> <option value="features">Features</option> <option value="breaking">Breaking</option> <option value="docs">Docs</option> <option value="opinion">Opinion</option> <option value="heartwarming">Heartwarming</option> <option value="promo">Promo</option> <option value="catalog">Catalog</option> </select> </div> <div class="field"> <label>Placement *</label> <select id="placement" class="select" required> <option value="section-item">Regular Item</option> <option value="hero">üé¨ Also promote as Hero (max 1)</option> <option value="todays-mix">‚≠ê Also promote in Today's Mix (max 4)</option> <option value="section-featured">üìå Also feature in section (max 1 per section)</option> </select> <p style="font-size:11px; color:var(--muted); margin-top:4px;">
All videos appear in their section. Placements promote them in special areas.
</p> </div> </div> <div id="hero-variant-wrap" class="field" style="display:none;"> <label>Hero Variant</label> <select id="hero_variant" class="select"> <option value="mosaic">Mosaic</option> <option value="split">Split</option> <option value="half">Half</option> <option value="full">Full</option> </select> </div> <div class="field"> <label>Title *</label> <input id="title" class="input" required> </div> <div class="field"> <label>Video Link * (YouTube, Instagram, etc.)</label> <input id="href" class="input" required placeholder="https://youtube.com/watch?v=..."> <button type="button" id="extract-btn" class="btn" style="margin-top:8px; width:100%;">
üîç Extract Info from YouTube
</button> </div> <div class="field"> <label>Thumbnail</label> <div class="upload-area" id="upload-area"> <div>üì∏ Drop image or click to paste URL</div> <input type="file" id="file-input" accept="image/*" style="display:none;"> </div> <input id="thumbnail" class="input" placeholder="Or paste image URL" style="margin-top:8px;"> </div> <div class="field"> <label>Description (Dek)</label> <textarea id="dek" class="input" rows="3" placeholder="Video description..."></textarea> </div> <div class="grid"> <div class="field"> <label>Byline / Author</label> <input id="byline" class="input" placeholder="TNN Staff"> </div> <div class="field"> <label>Runtime</label> <input id="runtime" class="input" placeholder="5:18"> </div> </div> <div class="grid"> <div class="field"> <label>Date</label> <input id="date" class="input" placeholder="Jan 27, 2026"> </div> <div class="field"> <label>Display Order</label> <input id="display_order" class="input" type="number" value="0"> </div> </div> <div class="field" style="display:flex; align-items:center; gap:10px; margin-top:10px;"> <input id="published" type="checkbox" checked> <label style="margin:0;">Published</label> </div> <div class="actions"> <button type="submit" class="btn primary">Save Video</button> </div> </form> </div> </div> <script type="module"`, '></script> <script type="module"', '></script> <script type="module"', '></script> <script type="module">', "\n    const { renderVideoTable } = window;\n    const { initModal } = window;\n    const { initFilters } = window;\n\n    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';\n\n    const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\n    // State\n    let videos = [];\n    let filteredVideos = [];\n\n    // Auth check\n    async function checkAuth() {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session) window.location.href = '/admin/login';\n    }\n    checkAuth();\n\n    // Logout\n    document.getElementById('logout').onclick = async () => {\n      await supabase.auth.signOut();\n      window.location.href = '/admin/login';\n    };\n\n    // Load videos\n    async function loadVideos() {\n      const { data } = await supabase.from('videos').select('*').order('display_order');\n      videos = data || [];\n      applyFilters();\n    }\n\n    // Apply filters\n    function applyFilters() {\n      filteredVideos = initFilters(videos, {\n        search: document.getElementById('search'),\n        section: document.getElementById('filter-section'),\n        placement: document.getElementById('filter-placement'),\n        status: document.getElementById('filter-status')\n      });\n      renderTable();\n    }\n\n    // Render table\n    function renderTable() {\n      document.getElementById('total-count').textContent = videos.length;\n      renderVideoTable(\n        filteredVideos,\n        document.getElementById('table-container'),\n        { onEdit: openEdit, onDelete: deleteVideo }\n      );\n    }\n\n    // CRUD operations\n    async function openEdit(id) {\n      const video = videos.find(v => String(v.id) === String(id));\n      if (!video) {\n        console.error('Video not found:', id);\n        return;\n      }\n      \n      console.log('Editing video:', video);\n      \n      // Populate the form\n      document.getElementById('modal-title').textContent = 'Edit Video';\n      document.getElementById('id').value = video.id;\n      document.getElementById('section').value = video.section || '';\n      document.getElementById('placement').value = video.placement || 'section-item';\n      document.getElementById('hero_variant').value = video.hero_variant || 'mosaic';\n      document.getElementById('title').value = video.title || '';\n      document.getElementById('href').value = video.href || '';\n      document.getElementById('thumbnail').value = video.thumbnail || '';\n      document.getElementById('dek').value = video.dek || '';\n      document.getElementById('byline').value = video.byline || '';\n      document.getElementById('runtime').value = video.runtime || '';\n      document.getElementById('date').value = video.date || '';\n      document.getElementById('display_order').value = video.display_order || 0;\n      document.getElementById('published').checked = !!video.published;\n\n      console.log('Form populated with:', {\n        title: document.getElementById('title').value,\n        section: document.getElementById('section').value,\n        placement: document.getElementById('placement').value\n      });\n\n      // Trigger placement change to show/hide hero variant\n      document.getElementById('placement').dispatchEvent(new Event('change'));\n      \n      // Show modal\n      document.getElementById('modal').classList.add('active');\n    }\n\n    async function deleteVideo(id) {\n      if (!confirm('Delete this video?')) return;\n      await supabase.from('videos').delete().eq('id', id);\n      loadVideos();\n    }\n\n    // Initialize modal\n    initModal(supabase, loadVideos);\n\n    // Filter events\n    ['search', 'filter-section', 'filter-placement', 'filter-status'].forEach(id => {\n      const el = document.getElementById(id);\n      el.addEventListener('input', applyFilters);\n      el.addEventListener('change', applyFilters);\n    });\n\n    // Start\n    loadVideos();\n  </script> </body> </html>"])), addAttribute(`${base}styles/dashboard.css`, "href"), addAttribute(`${base}styles/video-row.css`, "href"), renderHead(), addAttribute(`${base}scripts/video-table.js`, "src"), addAttribute(`${base}scripts/video-modal.js`, "src"), addAttribute(`${base}scripts/filters.js`, "src"), defineScriptVars({ supabaseUrl, supabaseAnonKey }));
}, "/Users/zanewolf/Documents/GitHub/TNN4.0/src/pages/admin/dashboard.astro", void 0);
const $$file = "/Users/zanewolf/Documents/GitHub/TNN4.0/src/pages/admin/dashboard.astro";
const $$url = "/TNN4.0/admin/dashboard";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$Dashboard,
  file: $$file,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
